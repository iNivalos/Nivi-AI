#burstRoot{position:fixed;inset:0;z-index:9999;display:none;pointer-events:auto}
#burstRoot *{box-sizing:border-box}

#burstRoot #world{position:fixed;inset:0}
  #burstRoot canvas{position:fixed;inset:0;width:100vw;height:100vh;touch-action:manipulation}

  #burstRoot #world.bw{ filter: grayscale(1) contrast(1.45) brightness(1.02); }
  #burstRoot #world.glitchShake{ animation: shake .08s infinite steps(2,end); }
  #burstRoot #world.glitchJitter{ transform: translate3d(1px,0,0); }
  @keyframes shake{
    0%{ transform: translate(0,0); }
    25%{ transform: translate(1px,-1px); }
    50%{ transform: translate(-1px,1px); }
    75%{ transform: translate(1px,1px); }
    100%{ transform: translate(0,0); }
  }

  #burstRoot #blackout{
    position:fixed;inset:0;background:#000;opacity:0;
    z-index:55;pointer-events:none;transition:opacity 180ms linear;
  }
  body.broken #burstRoot #blackout{ opacity:1; }

  #burstRoot #confWrap{
    position:fixed;left:0;right:0;bottom:0;z-index:80;
    padding: 12px 12px 16px; pointer-events:none;
    opacity:0; transform: translateY(6px);
    transition: opacity 260ms ease, transform 260ms ease;
  }
  body.broken #burstRoot #confWrap{ opacity:1; transform: translateY(0); }
  #burstRoot #confBox{
    margin:0 auto; max-width: 920px;
    border-radius: 18px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(0,0,0,.60);
    backdrop-filter: blur(10px);
    box-shadow:0 12px 34px rgba(0,0,0,.55);
    padding: 12px 14px;
  }
  #burstRoot #confText{
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    color: rgba(255,255,255,.90);
    font-size: 13px;
    line-height: 1.45;
    letter-spacing: .02em;
    white-space: pre-wrap;
  }

  #burstRoot #toast{
    position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
    z-index:90;padding:10px 12px;border-radius:14px;
    background:rgba(10,12,18,.55);border:1px solid rgba(255,255,255,.10);
    color:rgba(255,255,255,.86);backdrop-filter:blur(10px);
    opacity:0;pointer-events:none;transition:opacity .2s ease;
    font-size:13px;max-width:88vw;text-align:center
  }
  #burstRoot #toast.show{opacity:1}

  :root{
    --safe-top: env(safe-area-inset-top);
    --thought-maxw: min(88vw, 980px);
    --thought-pad-v: clamp(10px, 1.4vmin, 16px);
    --thought-pad-h: clamp(12px, 2.8vmin, 18px);
  }
  #burstRoot #thought{
    position:fixed;
    left:50%;
    top:72%;
    transform:translate(-50%,-50%);
    width:max-content;
    max-width:var(--thought-maxw);
    box-sizing:border-box;
    padding:var(--thought-pad-v) var(--thought-pad-h);
    border-radius:22px;
    background:rgba(245,245,245,0.13);
    border:1px solid rgba(255,255,255,0.16);
    color:rgba(255,255,255,0.94);
    font-size:clamp(14px,2.3vmin,20px);
    line-height:1.35;
    text-align:center;
    text-shadow:0 0 10px rgba(255,255,255,0.28);
    z-index:86;
    user-select:none;
    cursor:default;

    opacity:0;
    pointer-events:none;
    transition:opacity .22s ease, transform .22s ease, filter .22s ease;
    filter:drop-shadow(0 10px 22px rgba(0,0,0,0.35));
    will-change:transform, filter, opacity;
  }
  #burstRoot #thought.show{
    opacity:1;
    pointer-events:auto;
    animation:thoughtFloat 3.4s ease-in-out infinite;
  }
  @keyframes thoughtFloat{
    0%,100%{ transform:translate(-50%,-50%); }
    50%{ transform:translate(-50%,-58%); }
  }
  #burstRoot #thought::before{
    content:"";
    position:absolute; inset:0;
    border-radius:22px;
    background:
      repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.07) 0px,
        rgba(255,255,255,0.07) 1px,
        rgba(0,0,0,0.00) 2px,
        rgba(0,0,0,0.00) 6px
      ),
      radial-gradient(120% 80% at 50% 30%, rgba(255,255,255,0.10), rgba(0,0,0,0.0) 60%);
    opacity:0.35;
    pointer-events:none;
    mix-blend-mode:screen;
  }
  #burstRoot #thought::after{
    content:"";
    position:absolute; inset:-2px;
    border-radius:24px;
    background:linear-gradient(90deg, rgba(255,255,255,0.0), rgba(255,255,255,0.10), rgba(255,255,255,0.0));
    opacity:0.22;
    pointer-events:none;
    filter:blur(1px);
  }
  #burstRoot #thought.glitchy{
    filter:drop-shadow(0 10px 22px rgba(0,0,0,0.35)) contrast(1.05);
    animation:thoughtFloat 2.2s ease-in-out infinite, thoughtJitter 0.18s steps(2,end) infinite;
  }
  @keyframes thoughtJitter{
    0%{ transform:translate(calc(-50% + 0px), -50%); clip-path: inset(0 0 0 0 round 22px); }
    25%{ transform:translate(calc(-50% + 2px), calc(-50% - 1px)); clip-path: inset(0 0 2px 0 round 22px); }
    50%{ transform:translate(calc(-50% - 2px), calc(-50% + 1px)); clip-path: inset(1px 0 0 0 round 22px); }
    75%{ transform:translate(calc(-50% + 1px), -50%); clip-path: inset(0 1px 0 0 round 22px); }
    100%{ transform:translate(calc(-50% + 0px), -50%); clip-path: inset(0 0 0 0 round 22px); }
  }
  #burstRoot #thoughtText{ position:relative; z-index:2; white-space:normal; overflow-wrap:break-word; }
  #burstRoot #thoughtSys{
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    width:92%;
    text-align:center;
    font-size:clamp(10px,1.7vmin,14px);
    letter-spacing:0.10em;
    opacity:0.10;
    z-index:1;
    pointer-events:none;
    text-transform:uppercase;
  }
